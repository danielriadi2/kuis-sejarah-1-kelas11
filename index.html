<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Kuis Sejarah - Pendudukan Jepang</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; margin: 0; padding: 15px; user-select: none; }
        .container { max-width: 600px; margin: 0 auto; background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .timer-box { position: fixed; top: 0; left: 0; right: 0; background: #d32f2f; color: white; text-align: center; padding: 12px; font-weight: bold; font-size: 18px; z-index: 1000; }
        h2 { text-align: center; margin-top: 50px; color: #333; }
        .warning-text { text-align: center; color: #d32f2f; font-size: 13px; background: #ffebee; padding: 10px; border-radius: 5px; border: 1px solid #ffcdd2; margin-bottom: 20px;}
        
        /* Desain Input Baru */
        .input-group { margin-bottom: 15px; }
        label { font-weight: bold; display: block; margin-bottom: 5px; }
        input[type="text"], select { width: 100%; padding: 12px; box-sizing: border-box; border: 1px solid #ccc; border-radius: 6px; font-size: 16px; background: #fff; }
        
        .soal-card { background: #fff; border: 1px solid #e0e0e0; padding: 15px; margin-bottom: 20px; border-radius: 8px; }
        .nomor-urut { color: #1565c0; font-weight: bold; display: block; margin-bottom: 10px; }
        .pertanyaan { font-weight: 600; margin-bottom: 15px; line-height: 1.5; }
        .radio-label { display: block; padding: 10px; cursor: pointer; border: 1px solid transparent; border-radius: 6px; margin-bottom: 5px; font-weight: normal; }
        .radio-label:hover { background: #e3f2fd; border-color: #bbdefb; }
        input[type="radio"] { margin-right: 10px; transform: scale(1.2); }
        
        button { background: #2e7d32; color: white; padding: 15px; width: 100%; border: none; border-radius: 8px; font-size: 18px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        button:disabled { background: #ccc; cursor: not-allowed; }
        #loading, #finished-screen { display: none; text-align: center; }
    </style>
</head>
<body>

    <div class="timer-box">Sisa Waktu: <span id="time">Loading...</span></div>

    <div class="container" id="exam-area">
        <h2>KUIS SEJARAH INDONESIA</h2>
        <div class="warning-text">⚠️ JANGAN KELUAR APLIKASI ATAU JAWABAN TERKIRIM OTOMATIS!</div>
        
        <div class="input-group">
            <label>Nama Lengkap:</label>
            <input type="text" id="namaSiswa" placeholder="Contoh: Budi Santoso" required>
        </div>

        <div class="input-group">
            <label>Kelas:</label>
            <select id="kelasSiswa">
                <option value="">-- Pilih Kelas --</option>
                <option value="X SMA">Kelas X</option>
                <option value="XI IPS 1">XI IPS 1</option>
                <option value="XI IPS 2">XI IPS 2</option>
                <option value="XI IPA 1">XI IPA 1</option>
                <option value="XI IPA 2">XI IPA 2</option>
                <option value="XII SMA">Kelas XII</option>
                </select>
        </div>

        <form id="examForm">
            <div id="wadah-soal">
                <div class="soal-card" data-kunci="B"><p class="pertanyaan">Pada tanggal 11 Januari 1942, tentara Jepang pertama kali mendarat di wilayah Indonesia. Daerah manakah yang pertama kali diduduki tersebut?</p>
                <label class="radio-label"><input type="radio" name="q1" value="A"> A. Batavia (Jakarta)</label>
                <label class="radio-label"><input type="radio" name="q1" value="B"> B. Tarakan (Kalimantan Timur)</label>
                <label class="radio-label"><input type="radio" name="q1" value="C"> C. Palembang (Sumatera Selatan)</label>
                <label class="radio-label"><input type="radio" name="q1" value="D"> D. Surabaya (Jawa Timur)</label>
                <label class="radio-label"><input type="radio" name="q1" value="E"> E. Makassar (Sulawesi Selatan)</label></div>

                <div class="soal-card" data-kunci="E"><p class="pertanyaan">Belanda secara resmi menyerah tanpa syarat kepada Jepang pada tanggal 8 Maret 1942 melalui sebuah perjanjian yang dikenal sebagai...</p>
                <label class="radio-label"><input type="radio" name="q2" value="A"> A. Perjanjian Linggarjati</label>
                <label class="radio-label"><input type="radio" name="q2" value="B"> B. Perjanjian Renville</label>
                <label class="radio-label"><input type="radio" name="q2" value="C"> C. Kapitulasi Tuntang</label>
                <label class="radio-label"><input type="radio" name="q2" value="D"> D. Konferensi Meja Bundar</label>
                <label class="radio-label"><input type="radio" name="q2" value="E"> E. Kapitulasi Kalijati</label></div>

                <div class="soal-card" data-kunci="B"><p class="pertanyaan">Salah satu propaganda Jepang untuk menarik simpati rakyat Indonesia adalah "Gerakan 3A". Apa isi semboyan gerakan tersebut?</p>
                <label class="radio-label"><input type="radio" name="q3" value="A"> A. Nippon Saudara Asia, Nippon Pelindung Asia, Nippon Pemimpin Asia</label>
                <label class="radio-label"><input type="radio" name="q3" value="B"> B. Nippon Cahaya Asia, Nippon Pelindung Asia, Nippon Pemimpin Asia</label>
                <label class="radio-label"><input type="radio" name="q3" value="C"> C. Nippon Cahaya Asia, Nippon Penguasa Asia, Nippon Saudara Asia</label>
                <label class="radio-label"><input type="radio" name="q3" value="D"> D. Nippon Pemimpin Asia, Nippon Pembela Asia, Nippon Cahaya Asia</label>
                <label class="radio-label"><input type="radio" name="q3" value="E"> E. Nippon Pelindung Asia, Nippon Penyelamat Asia, Nippon Cahaya Asia</label></div>

                <div class="soal-card" data-kunci="C"><p class="pertanyaan">Mengapa pada awal kedatangannya, sebagian besar rakyat Indonesia menyambut tentara Jepang dengan gembira?</p>
                <label class="radio-label"><input type="radio" name="q4" value="A"> A. Karena Jepang berjanji memberikan kemerdekaan instan tanpa syarat</label>
                <label class="radio-label"><input type="radio" name="q4" value="B"> B. Karena Jepang membawa bantuan ekonomi yang besar</label>
                <label class="radio-label"><input type="radio" name="q4" value="C"> C. Karena Jepang dianggap sebagai "Saudara Tua" yang membebaskan Indonesia dari penjajahan Belanda</label>
                <label class="radio-label"><input type="radio" name="q4" value="D"> D. Karena rakyat takut akan kekuatan militer Jepang yang kejam</label>
                <label class="radio-label"><input type="radio" name="q4" value="E"> E. Karena Jepang beragama sama dengan mayoritas penduduk Indonesia</label></div>

                <div class="soal-card" data-kunci="D"><p class="pertanyaan">Organisasi yang dibentuk Jepang pada 16 April 1943 dan dipimpin oleh "Empat Serangkai" (Soekarno, Hatta, K.H. Mas Mansyur, Ki Hajar Dewantara) adalah...</p>
                <label class="radio-label"><input type="radio" name="q5" value="A"> A. Gerakan 3A</label>
                <label class="radio-label"><input type="radio" name="q5" value="B"> B. Jawa Hokokai</label>
                <label class="radio-label"><input type="radio" name="q5" value="C"> C. PETA</label>
                <label class="radio-label"><input type="radio" name="q5" value="D"> D. Putera (Pusat Tenaga Rakyat)</label>
                <label class="radio-label"><input type="radio" name="q5" value="E"> E. MIAI</label></div>

                <div class="soal-card" data-kunci="B"><p class="pertanyaan">Organisasi barisan pemuda yang dididik militer untuk mempertahankan tanah airnya (garis belakang) namun tanpa senjata lengkap disebut...</p>
                <label class="radio-label"><input type="radio" name="q6" value="A"> A. Heiho</label>
                <label class="radio-label"><input type="radio" name="q6" value="B"> B. Seinendan</label>
                <label class="radio-label"><input type="radio" name="q6" value="C"> C. Keibodan</label>
                <label class="radio-label"><input type="radio" name="q6" value="D"> D. Fujinkai</label>
                <label class="radio-label"><input type="radio" name="q6" value="E"> E. Gakukotai</label></div>

                <div class="soal-card" data-kunci="C"><p class="pertanyaan">Apa tujuan utama Jepang membentuk tentara PETA (Pembela Tanah Air) pada Oktober 1943?</p>
                <label class="radio-label"><input type="radio" name="q7" value="A"> A. Untuk membantu Jepang menyerang sekutu di luar negeri</label>
                <label class="radio-label"><input type="radio" name="q7" value="B"> B. Untuk memenuhi keinginan tokoh nasionalis memiliki tentara sendiri</label>
                <label class="radio-label"><input type="radio" name="q7" value="C"> C. Untuk membantu tentara Jepang mempertahankan pulau Jawa dari serangan Sekutu</label>
                <label class="radio-label"><input type="radio" name="q7" value="D"> D. Untuk mendidik pemuda Indonesia menjadi polisi</label>
                <label class="radio-label"><input type="radio" name="q7" value="E"> E. Sebagai pasukan cadangan untuk menyerang Belanda di Eropa</label></div>

                <div class="soal-card" data-kunci="A"><p class="pertanyaan">Kebijakan Jepang yang mengerahkan tenaga kerja paksa dari rakyat Indonesia untuk membangun sarana perang dalam kondisi yang sangat buruk disebut...</p>
                <label class="radio-label"><input type="radio" name="q8" value="A"> A. Romusha</label>
                <label class="radio-label"><input type="radio" name="q8" value="B"> B. Seikerei</label>
                <label class="radio-label"><input type="radio" name="q8" value="C"> C. Ekonomi Perang</label>
                <label class="radio-label"><input type="radio" name="q8" value="D"> D. Kinrohosi</label>
                <label class="radio-label"><input type="radio" name="q8" value="E"> E. Autarki</label></div>

                <div class="soal-card" data-kunci="C"><p class="pertanyaan">Salah satu dampak positif (secara tidak langsung) dari pendudukan Jepang di bidang militer bagi Indonesia adalah...</p>
                <label class="radio-label"><input type="radio" name="q9" value="A"> A. Indonesia mendapatkan hibah senjata modern dari Jepang</label>
                <label class="radio-label"><input type="radio" name="q9" value="B"> B. Rakyat Indonesia menjadi terbiasa dengan budaya disiplin keras</label>
                <label class="radio-label"><input type="radio" name="q9" value="C"> C. Pemuda Indonesia mendapat pelatihan militer yang menjadi bekal pembentukan TNI</label>
                <label class="radio-label"><input type="radio" name="q9" value="D"> D. Jepang membangun banyak benteng pertahanan permanen</label>
                <label class="radio-label"><input type="radio" name="q9" value="E"> E. Bahasa Indonesia diizinkan digunakan dalam instansi militer</label></div>

                <div class="soal-card" data-kunci="B"><p class="pertanyaan">Apa nama sistem pemerintahan tingkat paling bawah (Rukun Tetangga) yang dibentuk Jepang untuk mengawasi rakyat dan masih digunakan hingga kini?</p>
                <label class="radio-label"><input type="radio" name="q10" value="A"> A. Gun (Kecamatan)</label>
                <label class="radio-label"><input type="radio" name="q10" value="B"> B. Tonarigumi (Rukun Tetangga)</label>
                <label class="radio-label"><input type="radio" name="q10" value="C"> C. Ken (Kabupaten)</label>
                <label class="radio-label"><input type="radio" name="q10" value="D"> D. Syu (Keresidenan)</label>
                <label class="radio-label"><input type="radio" name="q10" value="E"> E. Ku (Desa)</label></div>
            </div>

            <button type="button" onclick="submitExam()" id="btnSubmit">KIRIM JAWABAN</button>
            <p id="loading">Sedang mengirim nilai...</p>
        </form>
    </div>

    <div class="container" id="finished-screen">
        <h2>KUIS SELESAI</h2>
        <div style="background:#e8f5e9; padding:20px; border-radius:10px; border:1px solid #a5d6a7;">
            <p>Nilai Anda:</p>
            <h1 id="score-display" style="font-size:70px; color:green;">0</h1>
            <p id="msg-status">Jawaban tersimpan.</p>
        </div>
        <button onclick="window.close()" style="background:#333; margin-top:20px;">Tutup</button>
    </div>

    <script>
        // --- TEMPEL LINK SCRIPT GOOGLE BAPAK DI SINI ---
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyYzwu7ed8exVFADsp2bar5dRHSdDvqb4NlkltT7H3QxDpIH9X0ve8SbPA23-HyQ7Os/exec"; 
        
        let duration = 1800; // 30 Menit

        let isSubmitted = false;
        window.onload = function() {
            var box = document.getElementById("wadah-soal");
            var els = Array.from(box.children);
            for (var i = els.length - 1; i > 0; i--) {
                var j = Math.floor(Math.random() * (i + 1));
                box.appendChild(els[j]);
            }
            Array.from(box.children).forEach((el, idx) => {
                el.insertAdjacentHTML('afterbegin', `<span class="nomor-urut">Soal No. ${idx + 1}</span>`);
            });
        };
        const timer = setInterval(() => {
            let m = Math.floor(duration/60).toString().padStart(2,'0');
            let s = (duration%60).toString().padStart(2,'0');
            document.getElementById('time').innerText = `${m}:${s}`;
            if (duration < 60) document.querySelector('.timer-box').style.backgroundColor = "red";
            if(--duration < 0) processData("Waktu Habis");
        }, 1000);
        document.addEventListener("visibilitychange", function() {
            if(document.hidden && !isSubmitted) processData("Curang (Keluar App)");
        });
        function submitExam() {
            if(!document.getElementById('namaSiswa').value) { alert("Isi Nama!"); return; }
            if(!document.getElementById('kelasSiswa').value) { alert("Pilih Kelas!"); return; }
            if(confirm("Yakin selesai?")) processData("Jujur");
        }
        function processData(status) {
            if(isSubmitted) return;
            isSubmitted = true;
            clearInterval(timer);
            document.getElementById('btnSubmit').disabled = true;
            document.getElementById('loading').style.display = 'block';
            let benar = 0; let detail = [];
            document.querySelectorAll('.soal-card').forEach((card) => {
                let k = card.getAttribute('data-kunci');
                let p = card.querySelector('input:checked');
                let v = p ? p.value : "X";
                if(v === k) benar++;
                detail.push(v);
            });
            let nilai = Math.round((benar/10)*100);
            
            // Mengirim data Nama + KELAS + Nilai
            fetch(SCRIPT_URL, {
                method: "POST", mode: "no-cors",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({
                    nama: document.getElementById('namaSiswa').value,
                    kelas: document.getElementById('kelasSiswa').value, // <-- DATA BARU
                    nilai: nilai, status: status, j1: detail.join(", ")
                })
            }).then(() => {
                document.getElementById('exam-area').style.display = 'none';
                document.querySelector('.timer-box').style.display = 'none';
                document.getElementById('finished-screen').style.display = 'block';
                document.getElementById('score-display').innerText = nilai;
                if(status.includes("Curang")) {
                    document.getElementById('msg-status').innerText = status;
                    document.getElementById('msg-status').style.color = "red";
                }
            });
        }
    </script>
</body>
</html>